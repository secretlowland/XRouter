<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
    <title>测试</title>    
    <!--调试面板-->
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
    <script src="./common.js"></script>

    <style>
      .content {
        display: flex;
        flex-direction: column;
        background-color: aqua;
        padding: 10px;
      }
      .start {
        height: 40px;
        margin-top: 10px;
      }
      #msg_txt {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      a {
        color: brown;
        padding-top: 15px;
        padding-bottom: 15px;
        padding-left: 10px;
      }
    </style>    
  </head>
  <body>
    <div class="content">
      <!-- <text>web test</text> -->      
      <input class="start" onclick="start()" type="button" value="START2" />
      <text id="msg_txt">msg</text>
    </div>

    <script>

      var DEEP_LINK_MI_WEATHER = "weather://details/webview?url=http://haowen-test.test.net/mi_market.html&push=false";
      var DEEP_LINK_MI_BROWSER = "";
      var DEEP_LINK_MI_MARKET = "mimarket://details?id=com.xunmeng.pinduoduo";
      var DEEP_LINK_HW_BROWSER = "hwbrowser://com.huawei.browser/parameter?url=hwwebview%3a%2f%2fnewtab%2fnewsfeed%2fdetail%3furl%3dhttp%3a%2f%2faxue-mobile.test.net%2fhuawei%2ftest.html%253fc%253d1%26isfrompush%3dtrue%26isfromfavorite%3dtrue%26ctype%3dnews%26dtype%3d1";
      
      var msg_txt = document.getElementById("msg_txt");
      msg_txt.innerText = "user-agent: " + window.navigator.userAgent;
  

      // init();
      // var wxrouter = new wxrouter();
  
      /*---------------------- function ----------------*/

      function init() {
        registerMessageListener();
        isChannelReady(function(ready) {
          log(`isReady: ${ready}`);
        });
      }

      function start() {
        console.log('start')
        // isChannelReady(function(ready) {
        //   log(`isReady: ${ready}`);
        // });
        routerByDeeplink('vivomarket://details?id=com.xingin.xhs');
        // sendMessage('start')
        // go2QuickApp()
      }
  
      function go2QuickApp() {
        var link = DEEP_LINK_MI_WEATHER;
        wxrouter.launch(link);
      }

      function registerMessageListener() {
        system.onmessage = function (data) {
          msg_txt.innerText = data;
          console.log("message received: " + data);
        };
      }

      function sendMessage(msg) {
        console.log('sendMessage');
        system.postMessage('1003');        
      }

    </script>
  </body>  
</html>
